# 211122_TIL

### 렉시컬 스코프

'스코프'는 엔진이 확인자 이름으로 현재 스코프 또는 중첩 스코프 내에서 변수를 찾을 때 사용하는 '규칙의 집합'이라고 정의했다.

스코프는 두 가지 방식으로 작동한다. 첫 번째 방식은 다른 방식보다 훨씬 더 일반적이고 다수의 프로그래밍 언어가 사용하는 방식이다. 이 방식을 '렉시컬 스코프'라고 부른다. 두 번째 방식은 Bash Scripting이나 Perl의 일부 모드와 같은 몇몇 언어에서 사용하는 방식으로 '동적 스코프'라고 부른다.

### 정리

렉시컬 스코프란 개발자가 코드를 작성할 때 함수를 어디에 선언하는지에 따라 정의되는 스코프를 말한다. 컴파일레이션의 렉싱 단계에서는 모든 확인자가 어디서 어떻게 선언됐는지 파악하여 실행 단계에서 어떻게 확인자를 검색할지 예상할 수 있도록 도와준다.

자바스크립트에는 렉시컬 스코프를 속이는 두 가지 방식이 있는데, eval()과 with다. eval()은 하나 이상의 선언문을 포함하는 코드 문자열을 해석하여 렉시컬 스코프가 있다면 런타임에 이를 수정한다. with는 객체 참조를 하나의 스코프로, 속성을 확인자로 간주하여 런타임에 완전히 새로운 렉시컬 스코프를 생성한다.

이런 방식의 단점은 eval()과 with가 엔진이 컴파일 단계에서 수행한 스코프 검색과 관련된 최적화 작업을 무산시킨다는 점이다. 이들이 수행되면 엔진은 최악의 경우를 대비해 진행했던 최적화 결과가 무효화됐다고 가정해야 하기 때문이다. 따라서 eval()과 with 중 하나라도 사용하면 코드는 더 느리게 동작하므로 이 방식은 사용하지 말자.